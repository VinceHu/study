---
title: ç»å¯¹å®šä½ vs Transform æ€§èƒ½å¯¹æ¯”
date: 2025-11-20
category: Performance
difficulty: é«˜çº§
tags: [æ€§èƒ½ä¼˜åŒ–, Transform, å®šä½, æµè§ˆå™¨æ¸²æŸ“, GPUåŠ é€Ÿ]
related: [../css/position.md, ../css/center-methods.md]
hasCode: false
---

# é¢˜ç›®

ä¸ºä»€ä¹ˆä½¿ç”¨TransformåšåŠ¨ç”»æ¯”ä½¿ç”¨ç»å¯¹å®šä½ï¼ˆtop/leftï¼‰æ€§èƒ½æ›´å¥½ï¼Ÿè¯·ä»æµè§ˆå™¨æ¸²æŸ“æœºåˆ¶çš„è§’åº¦è§£é‡Šã€‚

## ğŸ“ æ ‡å‡†ç­”æ¡ˆ

### æ ¸å¿ƒè¦ç‚¹

1. **æ¸²æŸ“æµç¨‹å·®å¼‚**ï¼šTransformåªè§¦å‘åˆæˆï¼ˆCompositeï¼‰ï¼Œç»å¯¹å®šä½ä¼šè§¦å‘é‡æ’ï¼ˆReflowï¼‰æˆ–é‡ç»˜ï¼ˆRepaintï¼‰
2. **GPUåŠ é€Ÿ**ï¼šTransformå¯ä»¥åˆ©ç”¨GPUåŠ é€Ÿï¼Œåœ¨ç‹¬ç«‹çš„åˆæˆå±‚æ¸²æŸ“
3. **ä¸»çº¿ç¨‹å½±å“**ï¼šTransformä¸å ç”¨ä¸»çº¿ç¨‹ï¼Œç»å¯¹å®šä½éœ€è¦ä¸»çº¿ç¨‹å‚ä¸è®¡ç®—
4. **æ€§èƒ½å·®å¼‚**ï¼šTransformå¯ä»¥è¾¾åˆ°60fpsæµç•…åŠ¨ç”»ï¼Œç»å¯¹å®šä½å®¹æ˜“å¡é¡¿

### è¯¦ç»†è¯´æ˜

#### æµè§ˆå™¨æ¸²æŸ“æµç¨‹

æµè§ˆå™¨æ¸²æŸ“é¡µé¢çš„å®Œæ•´æµç¨‹ï¼š

```
JavaScript â†’ Style â†’ Layout â†’ Paint â†’ Composite
   (JS)      (æ ·å¼)   (å¸ƒå±€)   (ç»˜åˆ¶)   (åˆæˆ)
```

1. **JavaScript**ï¼šæ‰§è¡ŒJSä»£ç ï¼Œä¿®æ”¹DOMæˆ–æ ·å¼
2. **Styleï¼ˆæ ·å¼è®¡ç®—ï¼‰**ï¼šè®¡ç®—å…ƒç´ çš„æœ€ç»ˆæ ·å¼
3. **Layoutï¼ˆå¸ƒå±€/é‡æ’ï¼‰**ï¼šè®¡ç®—å…ƒç´ çš„å‡ ä½•ä¿¡æ¯ï¼ˆä½ç½®ã€å°ºå¯¸ï¼‰
4. **Paintï¼ˆç»˜åˆ¶/é‡ç»˜ï¼‰**ï¼šå°†å…ƒç´ ç»˜åˆ¶æˆä½å›¾
5. **Compositeï¼ˆåˆæˆï¼‰**ï¼šå°†å¤šä¸ªå›¾å±‚åˆæˆæœ€ç»ˆç”»é¢

#### Transform vs ç»å¯¹å®šä½çš„æ¸²æŸ“å·®å¼‚

**ä½¿ç”¨ç»å¯¹å®šä½ï¼ˆtop/leftï¼‰ï¼š**

```css
.element {
  position: absolute;
  left: 100px; /* ä¿®æ”¹è¿™ä¸ªå€¼ */
}
```

è§¦å‘æµç¨‹ï¼š`JavaScript â†’ Style â†’ Layout â†’ Paint â†’ Composite`

- âœ… è§¦å‘æ ·å¼è®¡ç®—
- âŒ **è§¦å‘é‡æ’ï¼ˆLayoutï¼‰**ï¼šéœ€è¦é‡æ–°è®¡ç®—å…ƒç´ ä½ç½®
- âŒ **è§¦å‘é‡ç»˜ï¼ˆPaintï¼‰**ï¼šéœ€è¦é‡æ–°ç»˜åˆ¶å…ƒç´ 
- âœ… è§¦å‘åˆæˆ

**ä½¿ç”¨Transformï¼š**

```css
.element {
  transform: translateX(100px); /* ä¿®æ”¹è¿™ä¸ªå€¼ */
}
```

è§¦å‘æµç¨‹ï¼š`JavaScript â†’ Style â†’ Composite`

- âœ… è§¦å‘æ ·å¼è®¡ç®—
- âœ… **è·³è¿‡é‡æ’**ï¼šä¸å½±å“å¸ƒå±€
- âœ… **è·³è¿‡é‡ç»˜**ï¼šä¸éœ€è¦é‡æ–°ç»˜åˆ¶
- âœ… ä»…è§¦å‘åˆæˆ

#### æ€§èƒ½å¯¹æ¯”

| å±æ€§ | è§¦å‘é‡æ’ | è§¦å‘é‡ç»˜ | GPUåŠ é€Ÿ | æ€§èƒ½ |
|------|---------|---------|---------|------|
| top/left | âœ… æ˜¯ | âœ… æ˜¯ | âŒ å¦ | å·® |
| transform | âŒ å¦ | âŒ å¦ | âœ… æ˜¯ | ä¼˜ |

## ğŸ§  æ·±åº¦ç†è§£

### åº•å±‚åŸç†

#### 1. åˆæˆå±‚ï¼ˆComposite Layerï¼‰

æµè§ˆå™¨ä¼šå°†æŸäº›å…ƒç´ æå‡åˆ°ç‹¬ç«‹çš„åˆæˆå±‚ï¼š

**åˆ›å»ºåˆæˆå±‚çš„æ¡ä»¶ï¼š**
- 3Dæˆ–é€è§†å˜æ¢ï¼š`transform: translateZ(0)` æˆ– `transform: translate3d(0,0,0)`
- `will-change: transform`
- `<video>`ã€`<canvas>`ã€`<iframe>` å…ƒç´ 
- CSSåŠ¨ç”»æˆ–è¿‡æ¸¡ï¼ˆtransformã€opacityï¼‰
- `position: fixed`ï¼ˆæŸäº›æƒ…å†µï¼‰
- æœ‰åˆæˆå±‚åä»£ä¸”è‡ªèº«æœ‰transformã€opacityç­‰å±æ€§

**åˆæˆå±‚çš„ä¼˜åŠ¿ï¼š**
```css
.element {
  /* å¼ºåˆ¶åˆ›å»ºåˆæˆå±‚ */
  transform: translateZ(0);
  /* æˆ– */
  will-change: transform;
}
```

- åœ¨GPUä¸Šæ¸²æŸ“ï¼Œä¸å ç”¨ä¸»çº¿ç¨‹
- ç‹¬ç«‹ç»˜åˆ¶ï¼Œä¸å½±å“å…¶ä»–å…ƒç´ 
- åŠ¨ç”»æµç•…ï¼Œå¯è¾¾60fps

#### 2. é‡æ’ï¼ˆReflow/Layoutï¼‰

**è§¦å‘é‡æ’çš„å±æ€§ï¼š**
- ä½ç½®ï¼š`top`ã€`left`ã€`right`ã€`bottom`
- å°ºå¯¸ï¼š`width`ã€`height`ã€`padding`ã€`margin`ã€`border`
- æ˜¾ç¤ºï¼š`display`
- å®šä½ï¼š`position`
- æµ®åŠ¨ï¼š`float`
- å­—ä½“ï¼š`font-size`ã€`font-family`

**é‡æ’çš„ä»£ä»·ï¼š**
- éœ€è¦é‡æ–°è®¡ç®—æ‰€æœ‰å—å½±å“å…ƒç´ çš„å‡ ä½•ä¿¡æ¯
- å¯èƒ½å½±å“æ•´ä¸ªæ–‡æ¡£æ ‘ï¼ˆçˆ¶å…ƒç´ ã€å­å…ƒç´ ã€å…„å¼Ÿå…ƒç´ ï¼‰
- é˜»å¡ä¸»çº¿ç¨‹ï¼Œå¯¼è‡´å¡é¡¿

#### 3. é‡ç»˜ï¼ˆRepaintï¼‰

**è§¦å‘é‡ç»˜çš„å±æ€§ï¼š**
- é¢œè‰²ï¼š`color`ã€`background-color`
- è¾¹æ¡†æ ·å¼ï¼š`border-style`
- é˜´å½±ï¼š`box-shadow`ã€`text-shadow`
- å¯è§æ€§ï¼š`visibility`
- è½®å»“ï¼š`outline`

**é‡ç»˜çš„ä»£ä»·ï¼š**
- éœ€è¦é‡æ–°ç»˜åˆ¶å…ƒç´ çš„åƒç´ 
- æ¯”é‡æ’ä»£ä»·å°ï¼Œä½†ä»ç„¶æ¶ˆè€—æ€§èƒ½
- é˜»å¡ä¸»çº¿ç¨‹

#### 4. ä»…åˆæˆçš„å±æ€§

**åªè§¦å‘åˆæˆçš„å±æ€§ï¼ˆæ€§èƒ½æœ€ä¼˜ï¼‰ï¼š**
- `transform`
- `opacity`

è¿™ä¸¤ä¸ªå±æ€§æ˜¯åŠ¨ç”»æ€§èƒ½æœ€å¥½çš„é€‰æ‹©ã€‚

### å¸¸è§è¯¯åŒº

- **è¯¯åŒº1**ï¼šè®¤ä¸ºæ‰€æœ‰CSSå±æ€§æ€§èƒ½éƒ½ä¸€æ ·
  - æ­£è§£ï¼šä¸åŒå±æ€§è§¦å‘çš„æ¸²æŸ“æµç¨‹ä¸åŒï¼Œæ€§èƒ½å·®å¼‚å·¨å¤§
  
- **è¯¯åŒº2**ï¼šè®¤ä¸ºGPUåŠ é€Ÿæ€»æ˜¯å¥½çš„
  - æ­£è§£ï¼šè¿‡å¤šçš„åˆæˆå±‚ä¼šæ¶ˆè€—å¤§é‡å†…å­˜ï¼Œåè€Œé™ä½æ€§èƒ½
  
- **è¯¯åŒº3**ï¼šè®¤ä¸º`transform: translateZ(0)`æ˜¯hack
  - æ­£è§£ï¼šè¿™æ˜¯åˆç†çš„æ€§èƒ½ä¼˜åŒ–æ‰‹æ®µï¼Œä½†åº”è°¨æ…ä½¿ç”¨
  
- **è¯¯åŒº4**ï¼šæ‰€æœ‰åŠ¨ç”»éƒ½ç”¨transform
  - æ­£è§£ï¼šç®€å•çš„é¢œè‰²å˜åŒ–ç­‰ç”¨transitionå³å¯ï¼Œä¸å¿…å¼ºåˆ¶ç”¨transform

### è¿›é˜¶çŸ¥è¯†

#### will-changeå±æ€§

```css
.element {
  /* æå‰å‘ŠçŸ¥æµè§ˆå™¨å°†è¦å˜åŒ–çš„å±æ€§ */
  will-change: transform;
}

/* åŠ¨ç”»ç»“æŸååº”ç§»é™¤ */
.element.animated {
  will-change: auto;
}
```

**ä½¿ç”¨åŸåˆ™ï¼š**
1. ä¸è¦æ»¥ç”¨ï¼Œåªåœ¨ç¡®å®éœ€è¦ä¼˜åŒ–çš„å…ƒç´ ä¸Šä½¿ç”¨
2. ç»™æµè§ˆå™¨è¶³å¤Ÿçš„å‡†å¤‡æ—¶é—´ï¼ˆåœ¨åŠ¨ç”»å‰è®¾ç½®ï¼‰
3. åŠ¨ç”»ç»“æŸåç§»é™¤ï¼Œé¿å…æµªè´¹èµ„æº

#### å±‚çˆ†ç‚¸ï¼ˆLayer Explosionï¼‰

è¿‡å¤šçš„åˆæˆå±‚ä¼šå¯¼è‡´ï¼š
- å†…å­˜å ç”¨è¿‡é«˜
- åˆæˆæ—¶é—´å¢åŠ 
- åè€Œé™ä½æ€§èƒ½

**é¿å…å±‚çˆ†ç‚¸ï¼š**
```css
/* ä¸å¥½ï¼šæ¯ä¸ªå…ƒç´ éƒ½åˆ›å»ºå±‚ */
.item {
  transform: translateZ(0);
}

/* å¥½ï¼šåªåœ¨éœ€è¦åŠ¨ç”»çš„å…ƒç´ ä¸Šåˆ›å»º */
.item.animating {
  will-change: transform;
}
```

#### æ€§èƒ½æµ‹è¯•å·¥å…·

**Chrome DevToolsï¼š**
1. **Performanceé¢æ¿**ï¼šå½•åˆ¶æ€§èƒ½ï¼ŒæŸ¥çœ‹FPSã€é‡æ’ã€é‡ç»˜
2. **Renderingé¢æ¿**ï¼š
   - Paint flashingï¼šæ˜¾ç¤ºé‡ç»˜åŒºåŸŸ
   - Layer bordersï¼šæ˜¾ç¤ºåˆæˆå±‚è¾¹ç•Œ
   - FPS meterï¼šæ˜¾ç¤ºå®æ—¶å¸§ç‡

**æ£€æµ‹ä»£ç ï¼š**
```javascript
// æ£€æµ‹æ˜¯å¦æœ‰åˆæˆå±‚
const element = document.querySelector('.element');
const computedStyle = getComputedStyle(element);
console.log(computedStyle.transform); // æŸ¥çœ‹transformå€¼

// ä½¿ç”¨Performance API
performance.mark('animation-start');
// æ‰§è¡ŒåŠ¨ç”»
performance.mark('animation-end');
performance.measure('animation', 'animation-start', 'animation-end');
```


## ğŸ’¡ é¢è¯•å›ç­”æŠ€å·§

### ğŸ¯ ä¸€å¥è¯å›ç­”ï¼ˆå¿«é€Ÿç‰ˆï¼‰

> Transformåªè§¦å‘åˆæˆï¼ˆCompositeï¼‰ï¼Œè·³è¿‡é‡æ’å’Œé‡ç»˜ï¼Œè¿˜èƒ½åˆ©ç”¨GPUåŠ é€Ÿï¼›è€Œtop/leftä¼šè§¦å‘é‡æ’å’Œé‡ç»˜ï¼Œæ€§èƒ½å·®å¾ˆå¤šã€‚

### ğŸ“£ å£è¯­åŒ–å›ç­”ï¼ˆæ¨èï¼‰

é¢è¯•æ—¶å¯ä»¥è¿™æ ·å›ç­”ï¼š

> "è¿™ä¸ªé—®é¢˜è¦ä»æµè§ˆå™¨çš„æ¸²æŸ“æµç¨‹è¯´èµ·ã€‚æµè§ˆå™¨æ¸²æŸ“é¡µé¢æœ‰5ä¸ªé˜¶æ®µï¼šJavaScriptã€æ ·å¼è®¡ç®—ã€å¸ƒå±€ï¼ˆLayoutï¼‰ã€ç»˜åˆ¶ï¼ˆPaintï¼‰ã€åˆæˆï¼ˆCompositeï¼‰ã€‚
>
> å½“æˆ‘ä»¬ä¿®æ”¹ **top/left** è¿™äº›å±æ€§æ—¶ï¼Œä¼šè§¦å‘å¸ƒå±€é˜¶æ®µï¼Œä¹Ÿå°±æ˜¯**é‡æ’**ã€‚é‡æ’éœ€è¦é‡æ–°è®¡ç®—å…ƒç´ çš„å‡ ä½•ä¿¡æ¯ï¼Œè€Œä¸”å¯èƒ½å½±å“åˆ°å…¶ä»–å…ƒç´ ï¼Œä»£ä»·å¾ˆå¤§ã€‚é‡æ’ä¹‹åè¿˜è¦**é‡ç»˜**ï¼ŒæŠŠå…ƒç´ é‡æ–°ç”»ä¸€éã€‚
>
> ä½† **Transform** ä¸ä¸€æ ·ï¼Œå®ƒåªè§¦å‘åˆæˆé˜¶æ®µï¼Œå®Œå…¨è·³è¿‡äº†é‡æ’å’Œé‡ç»˜ã€‚è€Œä¸” Transform å¯ä»¥åˆ©ç”¨ **GPU åŠ é€Ÿ**ï¼Œåœ¨ç‹¬ç«‹çš„åˆæˆå±‚ä¸Šæ¸²æŸ“ï¼Œä¸å ç”¨ä¸»çº¿ç¨‹ã€‚
>
> æ‰€ä»¥åšåŠ¨ç”»æ—¶ï¼Œç”¨ `transform: translateX()` ä»£æ›¿ `left`ï¼Œç”¨ `transform: scale()` ä»£æ›¿ `width/height`ï¼Œæ€§èƒ½ä¼šå¥½å¾ˆå¤šï¼Œèƒ½è½»æ¾è¾¾åˆ° **60fps** çš„æµç•…åŠ¨ç”»ã€‚
>
> å®é™…ä¸Šï¼Œåªæœ‰ **transform** å’Œ **opacity** è¿™ä¸¤ä¸ªå±æ€§èƒ½å®Œå…¨è·³è¿‡é‡æ’é‡ç»˜ï¼Œæ˜¯åšåŠ¨ç”»çš„æœ€ä½³é€‰æ‹©ã€‚
>
> ä¸è¿‡ä¹Ÿè¦æ³¨æ„ï¼Œä¸è¦æ»¥ç”¨ `will-change` æˆ– `translateZ(0)` æ¥å¼ºåˆ¶åˆ›å»ºåˆæˆå±‚ï¼Œå¤ªå¤šåˆæˆå±‚ä¼šå¯¼è‡´å†…å­˜å ç”¨è¿‡é«˜ï¼Œåè€Œå½±å“æ€§èƒ½ï¼Œè¿™å«**å±‚çˆ†ç‚¸**ã€‚"

### æ¨èå›ç­”é¡ºåº

1. **å…ˆè¯´ç»“è®º**ï¼šTransformæ€§èƒ½æ›´å¥½ï¼Œå› ä¸ºåªè§¦å‘åˆæˆï¼Œä¸è§¦å‘é‡æ’é‡ç»˜
2. **è§£é‡Šæ¸²æŸ“æµç¨‹**ï¼šä»‹ç»æµè§ˆå™¨çš„5ä¸ªæ¸²æŸ“é˜¶æ®µ
3. **å¯¹æ¯”å·®å¼‚**ï¼šç»å¯¹å®šä½è§¦å‘Layoutå’ŒPaintï¼ŒTransformåªè§¦å‘Composite
4. **è¯´æ˜GPUåŠ é€Ÿ**ï¼šTransformå¯ä»¥åœ¨GPUä¸Šæ¸²æŸ“ï¼Œåˆ©ç”¨ç¡¬ä»¶åŠ é€Ÿ
5. **è¡¥å……å®è·µ**ï¼šæåˆ°will-changeã€åˆæˆå±‚ç­‰ä¼˜åŒ–æ‰‹æ®µ

### é‡ç‚¹å¼ºè°ƒ

- å¼ºè°ƒ"é‡æ’ > é‡ç»˜ > åˆæˆ"çš„æ€§èƒ½å·®å¼‚
- è¯´æ˜Transformå’Œopacityæ˜¯ä»…æœ‰çš„ä¸¤ä¸ªåªè§¦å‘åˆæˆçš„å±æ€§
- æåˆ°å®é™…é¡¹ç›®ä¸­çš„åº”ç”¨ï¼šåŠ¨ç”»ã€æ»šåŠ¨ä¼˜åŒ–ç­‰
- è¯´æ˜è¿‡åº¦ä¼˜åŒ–çš„é—®é¢˜ï¼šå±‚çˆ†ç‚¸

### å¯èƒ½çš„è¿½é—®

**Q1: ä»€ä¹ˆæ˜¯é‡æ’ï¼ˆReflowï¼‰å’Œé‡ç»˜ï¼ˆRepaintï¼‰ï¼Ÿ**

A: 
- **é‡æ’ï¼ˆReflow/Layoutï¼‰**ï¼šå½“å…ƒç´ çš„å‡ ä½•å±æ€§ï¼ˆä½ç½®ã€å°ºå¯¸ï¼‰å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæµè§ˆå™¨éœ€è¦é‡æ–°è®¡ç®—å…ƒç´ çš„å‡ ä½•ä¿¡æ¯ï¼Œè¿™ä¸ªè¿‡ç¨‹å«é‡æ’ã€‚é‡æ’ä¼šå½±å“åˆ°å…¶ä»–å…ƒç´ ï¼ˆçˆ¶å…ƒç´ ã€å­å…ƒç´ ã€å…„å¼Ÿå…ƒç´ ï¼‰ï¼Œä»£ä»·å¾ˆå¤§ã€‚

- **é‡ç»˜ï¼ˆRepaintï¼‰**ï¼šå½“å…ƒç´ çš„å¤–è§‚ï¼ˆé¢œè‰²ã€èƒŒæ™¯ç­‰ï¼‰å‘ç”Ÿå˜åŒ–ï¼Œä½†å‡ ä½•å±æ€§ä¸å˜æ—¶ï¼Œæµè§ˆå™¨éœ€è¦é‡æ–°ç»˜åˆ¶å…ƒç´ ï¼Œè¿™ä¸ªè¿‡ç¨‹å«é‡ç»˜ã€‚é‡ç»˜ä¸å½±å“å¸ƒå±€ï¼Œä»£ä»·æ¯”é‡æ’å°ã€‚

**æ€§èƒ½å…³ç³»ï¼š** é‡æ’ > é‡ç»˜ > åˆæˆ

```javascript
// è§¦å‘é‡æ’
element.style.width = '100px';
element.style.left = '100px';

// è§¦å‘é‡ç»˜
element.style.backgroundColor = 'red';

// ä»…è§¦å‘åˆæˆï¼ˆæ€§èƒ½æœ€å¥½ï¼‰
element.style.transform = 'translateX(100px)';
element.style.opacity = '0.5';
```

**Q2: å¦‚ä½•æŸ¥çœ‹å…ƒç´ æ˜¯å¦åˆ›å»ºäº†åˆæˆå±‚ï¼Ÿ**

A: ä½¿ç”¨Chrome DevToolsï¼š
1. æ‰“å¼€DevTools â†’ More tools â†’ Layers
2. å¯ä»¥çœ‹åˆ°é¡µé¢çš„æ‰€æœ‰åˆæˆå±‚
3. ç‚¹å‡»æŸä¸ªå±‚å¯ä»¥æŸ¥çœ‹åˆ›å»ºåŸå› 

æˆ–è€…ä½¿ç”¨Renderingé¢æ¿ï¼š
1. æ‰“å¼€DevTools â†’ More tools â†’ Rendering
2. å‹¾é€‰"Layer borders"
3. æ©™è‰²è¾¹æ¡†è¡¨ç¤ºåˆæˆå±‚

```javascript
// ä»£ç æ£€æµ‹
const element = document.querySelector('.element');
const hasLayer = getComputedStyle(element).transform !== 'none';
console.log('Has composite layer:', hasLayer);
```

**Q3: will-changeå±æ€§æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•ä½¿ç”¨ï¼Ÿ**

A: `will-change`æ˜¯CSSå±æ€§ï¼Œç”¨äºæå‰å‘ŠçŸ¥æµè§ˆå™¨å…ƒç´ å°†è¦å‘ç”Ÿçš„å˜åŒ–ï¼Œè®©æµè§ˆå™¨æå‰åšä¼˜åŒ–å‡†å¤‡ã€‚

```css
/* å‘ŠçŸ¥æµè§ˆå™¨transformå°†è¦å˜åŒ– */
.element {
  will-change: transform;
}

/* å¯ä»¥æŒ‡å®šå¤šä¸ªå±æ€§ */
.element {
  will-change: transform, opacity;
}
```

**ä½¿ç”¨åŸåˆ™ï¼š**
1. **ä¸è¦æ»¥ç”¨**ï¼šåªåœ¨ç¡®å®éœ€è¦ä¼˜åŒ–çš„å…ƒç´ ä¸Šä½¿ç”¨ï¼Œè¿‡å¤šä½¿ç”¨ä¼šæµªè´¹èµ„æº
2. **æå‰è®¾ç½®**ï¼šåœ¨åŠ¨ç”»å¼€å§‹å‰è®¾ç½®ï¼Œç»™æµè§ˆå™¨å‡†å¤‡æ—¶é—´
3. **åŠæ—¶ç§»é™¤**ï¼šåŠ¨ç”»ç»“æŸåç§»é™¤ï¼Œé‡Šæ”¾èµ„æº

```javascript
// æ­£ç¡®çš„ä½¿ç”¨æ–¹å¼
element.addEventListener('mouseenter', () => {
  element.style.willChange = 'transform';
});

element.addEventListener('animationend', () => {
  element.style.willChange = 'auto'; // ç§»é™¤
});
```

**Q4: ä»€ä¹ˆæ˜¯å±‚çˆ†ç‚¸ï¼ˆLayer Explosionï¼‰ï¼Ÿå¦‚ä½•é¿å…ï¼Ÿ**

A: å±‚çˆ†ç‚¸æ˜¯æŒ‡é¡µé¢åˆ›å»ºäº†è¿‡å¤šçš„åˆæˆå±‚ï¼Œå¯¼è‡´å†…å­˜å ç”¨è¿‡é«˜ã€åˆæˆæ—¶é—´å¢åŠ ï¼Œåè€Œé™ä½æ€§èƒ½ã€‚

**äº§ç”ŸåŸå› ï¼š**
- è¿‡åº¦ä½¿ç”¨`transform: translateZ(0)`
- æ»¥ç”¨`will-change`
- å¤§é‡å…ƒç´ åŒæ—¶åˆ›å»ºåˆæˆå±‚

**é¿å…æ–¹æ³•ï¼š**
1. åªåœ¨éœ€è¦åŠ¨ç”»çš„å…ƒç´ ä¸Šåˆ›å»ºåˆæˆå±‚
2. åŠ¨ç”»ç»“æŸåç§»é™¤will-change
3. ä½¿ç”¨Chrome DevToolsçš„Layersé¢æ¿ç›‘æ§åˆæˆå±‚æ•°é‡
4. è€ƒè™‘ä½¿ç”¨CSS containmentï¼ˆ`contain`å±æ€§ï¼‰

```css
/* ä¸å¥½ï¼šæ‰€æœ‰iteméƒ½åˆ›å»ºå±‚ */
.item {
  transform: translateZ(0);
}

/* å¥½ï¼šåªåœ¨hoveræ—¶åˆ›å»º */
.item:hover {
  will-change: transform;
}

/* æ›´å¥½ï¼šç”¨JSæ§åˆ¶ */
.item.animating {
  will-change: transform;
}
```

**Q5: é™¤äº†transformå’Œopacityï¼Œè¿˜æœ‰å…¶ä»–é«˜æ€§èƒ½çš„åŠ¨ç”»å±æ€§å—ï¼Ÿ**

A: åŸºæœ¬æ²¡æœ‰ã€‚åªæœ‰`transform`å’Œ`opacity`è¿™ä¸¤ä¸ªå±æ€§å¯ä»¥å®Œå…¨è·³è¿‡é‡æ’å’Œé‡ç»˜ï¼Œç›´æ¥åœ¨åˆæˆå±‚å¤„ç†ã€‚

**é«˜æ€§èƒ½åŠ¨ç”»çš„æœ€ä½³å®è·µï¼š**
```css
/* æ¨èï¼šåªç”¨transformå’Œopacity */
.element {
  transition: transform 0.3s, opacity 0.3s;
}

.element:hover {
  transform: translateX(100px) scale(1.1);
  opacity: 0.8;
}

/* ä¸æ¨èï¼šä¼šè§¦å‘é‡æ’æˆ–é‡ç»˜ */
.element {
  transition: left 0.3s, width 0.3s, background-color 0.3s;
}
```

**æ›¿ä»£æ–¹æ¡ˆï¼š**
- ä½ç½®å˜åŒ–ï¼šç”¨`transform: translate()`ä»£æ›¿`left/top`
- å°ºå¯¸å˜åŒ–ï¼šç”¨`transform: scale()`ä»£æ›¿`width/height`
- æ—‹è½¬ï¼šç”¨`transform: rotate()`
- é€æ˜åº¦ï¼šç”¨`opacity`

**Q6: åœ¨å®é™…é¡¹ç›®ä¸­å¦‚ä½•åº”ç”¨è¿™äº›æ€§èƒ½ä¼˜åŒ–ï¼Ÿ**

A: å¸¸è§åº”ç”¨åœºæ™¯ï¼š

**1. æ»šåŠ¨ä¼˜åŒ–ï¼š**
```css
.fixed-header {
  position: fixed;
  /* åˆ›å»ºåˆæˆå±‚ï¼Œæ»šåŠ¨æ—¶ä¸é‡ç»˜ */
  will-change: transform;
}
```

**2. åŠ¨ç”»ä¼˜åŒ–ï¼š**
```css
.modal {
  /* å…¥åœºåŠ¨ç”» */
  animation: slideIn 0.3s ease-out;
}

@keyframes slideIn {
  from {
    transform: translateY(-100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}
```

**3. æ— é™æ»šåŠ¨åˆ—è¡¨ï¼š**
```css
.list-item {
  /* åªåœ¨å¯è§†åŒºåŸŸçš„itemåˆ›å»ºåˆæˆå±‚ */
  contain: layout style paint;
}

.list-item.visible {
  will-change: transform;
}
```

**4. è§†å·®æ»šåŠ¨ï¼š**
```javascript
window.addEventListener('scroll', () => {
  const scrollY = window.scrollY;
  // ä½¿ç”¨transformè€Œä¸æ˜¯top
  element.style.transform = `translateY(${scrollY * 0.5}px)`;
});
```

### åŠ åˆ†é¡¹

- æåˆ°CSS containmentï¼ˆ`contain`å±æ€§ï¼‰ç”¨äºéš”ç¦»æ¸²æŸ“
- è¯´æ˜requestAnimationFrameçš„ä½œç”¨
- æåˆ°è™šæ‹Ÿæ»šåŠ¨ã€æ‡’åŠ è½½ç­‰æ€§èƒ½ä¼˜åŒ–æ‰‹æ®µ
- ç»“åˆå®é™…é¡¹ç›®ç»éªŒï¼Œè¯´æ˜æ€§èƒ½ä¼˜åŒ–çš„æ”¶ç›Š
- æåˆ°æ€§èƒ½ç›‘æ§å·¥å…·ï¼šLighthouseã€WebPageTestç­‰

## ğŸ”— ç›¸å…³çŸ¥è¯†ç‚¹

- [Positionå®šä½](../css/position.md) - ç†è§£ç»å¯¹å®šä½çš„å·¥ä½œåŸç†
- [æ°´å¹³å‚ç›´å±…ä¸­](../css/center-methods.md) - Transformåœ¨å±…ä¸­ä¸­çš„åº”ç”¨
- [CSSç›’æ¨¡å‹](../css/box-model.md) - ç†è§£å¸ƒå±€è®¡ç®—

## ğŸ“š å‚è€ƒèµ„æ–™

- [Google Developers - æ¸²æŸ“æ€§èƒ½](https://developers.google.com/web/fundamentals/performance/rendering)
- [MDN - CSS will-change](https://developer.mozilla.org/zh-CN/docs/Web/CSS/will-change)
- [Compositor only properties](https://www.html5rocks.com/en/tutorials/speed/high-performance-animations/)
- [CSS Triggers](https://csstriggers.com/) - æŸ¥è¯¢CSSå±æ€§è§¦å‘çš„æ¸²æŸ“æµç¨‹
- [æµè§ˆå™¨æ¸²æŸ“åŸç†](https://www.chromium.org/developers/design-documents/gpu-accelerated-compositing-in-chrome/)
